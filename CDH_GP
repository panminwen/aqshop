

1、安装CDH 
正常安装 CDH，并且启动 CDH 的 server 和 agent  的服务
2、安装GP
正常安装 GP ，并且启动
3、问题
（1）当 CDH agent 服务挂掉之后，启动会报错。
错误发现：
1）查看日志（位置在 /opt/cm-5.4.3/log/cloudera-scm-agent  或者是 /var/log/cm-5.4.3/  或者是 /var/log/ 下面）
          
[root@centos1 cloudera-scm-agent]# cat cloudera-scm-agent.out 
Traceback (most recent call last):
  File "/opt/cm-5.4.3/lib64/cmf/agent/src/cmf/agent.py", line 3, in <module>
    import argparse
ImportError: No module named argparse

2）which python
[root@centos1 ~]# which python
/home/greenplum-db/ext/python/bin/python

python 的import 包会报错

3）查看python 源码


解决方案：
1）将 GP 搭建时候在 /etc/profile 里面的环境变量注释掉（所有节点），source 一下
2）关掉所有标签重新打开，执行启动 server 和 agent 的命令
3）启动 CDH 集群
4）/etc/profile 里面关于 GP 的环境变量解开注释（所有节点），source 一下
5）关掉所有标签重新打开，执行 gpstop -a  命令，没有报错情况下执行   gpstart -a  命令
		

